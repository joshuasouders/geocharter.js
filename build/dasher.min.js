/*! dasher.js 2014-08-04 */
function Panel(a,b){this.id=a,this.topLeftGraph=b.topLeft,this.bottomRightGraph=b.bottomRight,this.containerWidth=$("#"+a).parent().width(),this.containerHeight=$("#"+a).parent().height(),this.stepSize=this.containerWidth/12,this.topLeft=[Math.floor(this.topLeftGraph[0]*this.stepSize),Math.floor(this.topLeftGraph[1]*this.stepSize)],this.bottomRight=[Math.floor(this.bottomRightGraph[0]*this.stepSize),Math.floor(this.bottomRightGraph[1]*this.stepSize)],this.width=this.bottomRight[0]-this.topLeft[0]-$("#"+a).css("margin").replace(/\D/g,""),this.height=this.bottomRight[1]-this.topLeft[1]-$("#"+a).css("margin").replace(/\D/g,""),$("#"+a).css("left",this.topLeft[0]+"px"),$("#"+a).css("top",this.topLeft[1]+"px"),$("#"+a).css("width",this.width+"px"),$("#"+a).css("height",this.height+"px")}function Chart(a){this.id=a}function Piechart(a,b,c,d,e){this.id=a,this.data=b,this.panel=new Panel(a,c),this.div=document.getElementById(this.id),this.title=d,this.chart="",this.chartContext="";var f;for(f in e){var g,h=f,i=e[f];for(g in this.options){var j=g;h==j&&(this.options[g]=i)}}this.initializeChart(),this.setData(this.data)}function Barchart(a,b,c,d,e){this.id=a,this.data=b,this.panel=new Panel(a,c),this.div=document.getElementById(this.id),this.chart="",this.chartContext="",this.title=d;var f;for(f in e){var g,h=f,i=e[f];for(g in this.options){var j=g;h==j&&(this.options[g]=i)}}this.initializeChart(),this.setData(this.data)}function Linechart(a,b,c,d,e){this.id=a,this.data=b,this.panel=new Panel(a,c),this.div=document.getElementById(this.id),this.title=d,this.chart="",this.chartContext="";var f;for(f in e){var g,h=f,i=e[f];for(g in this.options){var j=g;h==j&&(this.options[g]=i)}}this.initializeChart(),this.setData(this.data)}function Map(a,b,c,d,e){this.id=a,this.data=b,this.panel=new Panel(a,c),this.div=document.getElementById(this.id),this.title=d,this.chart="",this.chartContext="";var f;for(f in e){var g,h=f,i=e[f];for(g in this.options){var j=g;h==j&&(this.options[g]=i)}}this.initializeChart(),this.setData(this.data)}function Table(a,b,c,d,e){this.id=a,this.data=b,this.panel=new Panel(a,c),this.div=document.getElementById(this.id),this.title=d,this.chart="",this.chartContext="";var f;for(f in e){var g,h=f,i=e[f];for(g in this.options){var j=g;h==j&&(this.options[g]=i)}}this.initializeChart(),this.setData(this.data)}Chart.prototype.constructor=Chart,Chart.prototype.initializeChart=function(){},Chart.prototype.setData=function(){},Piechart.prototype.constructor=Piechart,Piechart.prototype.initializeChart=function(){this.div.innerHTML="<h3>"+this.title+"</h3>";var a=document.createElement("canvas");a.setAttribute("id","geocharter-"+this.id),a.width=this.div.clientWidth-window.getComputedStyle(this.div,null).getPropertyValue("padding-right").replace(/\D/g,"")-window.getComputedStyle(this.div,null).getPropertyValue("padding-left").replace(/\D/g,""),a.height=this.div.clientHeight-window.getComputedStyle(this.div,null).getPropertyValue("padding-bottom").replace(/\D/g,"")-window.getComputedStyle(this.div,null).getPropertyValue("padding-top").replace(/\D/g,"")-$("h3").css("fontSize").replace(/\D/g,"")-$("h3").css("margin-top").replace(/\D/g,"")-$("h3").css("margin-bottom").replace(/\D/g,""),this.div.innerHTML=this.div.innerHTML+a.outerHTML,this.chartContext=document.getElementById("geocharter-"+this.id).getContext("2d")},Piechart.prototype.setData=function(a){this.chart=new Chart(this.chartContext).Pie(a)},Barchart.prototype.constructor=Barchart,Barchart.prototype.initializeChart=function(){this.div.innerHTML="<h3>"+this.title+"</h3>";var a=document.createElement("canvas");a.setAttribute("id","geocharter-"+this.id),a.width=this.div.clientWidth-window.getComputedStyle(this.div,null).getPropertyValue("padding-right").replace(/\D/g,"")-window.getComputedStyle(this.div,null).getPropertyValue("padding-left").replace(/\D/g,""),a.height=this.div.clientHeight-window.getComputedStyle(this.div,null).getPropertyValue("padding-bottom").replace(/\D/g,"")-window.getComputedStyle(this.div,null).getPropertyValue("padding-top").replace(/\D/g,"")-$("h3").css("fontSize").replace(/\D/g,"")-$("h3").css("margin-top").replace(/\D/g,"")-$("h3").css("margin-bottom").replace(/\D/g,""),this.div.innerHTML=this.div.innerHTML+a.outerHTML,this.chartContext=document.getElementById("geocharter-"+this.id).getContext("2d")},Barchart.prototype.setData=function(a){this.chart=new Chart(this.chartContext).Bar(a,this.options)},Linechart.prototype.constructor=Linechart,Linechart.prototype.initializeChart=function(){this.div.innerHTML="<h3>"+this.title+"</h3>";var a=document.createElement("canvas");a.setAttribute("id","geocharter-"+this.id),a.width=this.div.clientWidth-window.getComputedStyle(this.div,null).getPropertyValue("padding-right").replace(/\D/g,"")-window.getComputedStyle(this.div,null).getPropertyValue("padding-left").replace(/\D/g,""),a.height=this.div.clientHeight-window.getComputedStyle(this.div,null).getPropertyValue("padding-bottom").replace(/\D/g,"")-window.getComputedStyle(this.div,null).getPropertyValue("padding-top").replace(/\D/g,"")-$("h3").css("fontSize").replace(/\D/g,"")-$("h3").css("margin-top").replace(/\D/g,"")-$("h3").css("margin-bottom").replace(/\D/g,""),this.div.innerHTML=this.div.innerHTML+a.outerHTML,this.chartContext=document.getElementById("geocharter-"+this.id).getContext("2d")},Linechart.prototype.setData=function(a){this.chart=new Chart(this.chartContext).Line(a)},Map.prototype.constructor=Map,Map.prototype.initializeChart=function(){this.div.innerHTML="<h3>"+this.title+'</h3><div id="map"></div>',$("#map").css("width",this.div.clientWidth-window.getComputedStyle(this.div,null).getPropertyValue("padding-right").replace(/\D/g,"")-window.getComputedStyle(this.div,null).getPropertyValue("padding-left").replace(/\D/g,"")),$("#map").css("height",this.div.clientHeight-window.getComputedStyle(this.div,null).getPropertyValue("padding-bottom").replace(/\D/g,"")-window.getComputedStyle(this.div,null).getPropertyValue("padding-top").replace(/\D/g,"")-$("h3").css("fontSize").replace(/\D/g,"")-$("h3").css("margin-top").replace(/\D/g,"")-$("h3").css("margin-bottom").replace(/\D/g,"")),this.map=L.map("map").setView([39,-77],8),console.log("here"),L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18}).addTo(this.map)},Map.prototype.setData=function(a){L.geoJson(a).addTo(this.map)},Table.prototype.constructor=Table,Table.prototype.initializeChart=function(){this.div.innerHTML='<div id="geocharter-'+this.id+'" class="table-container"></div>',$("#geocharter-"+this.id).css("width",this.div.clientWidth-window.getComputedStyle(this.div,null).getPropertyValue("padding-right").replace(/\D/g,"")-window.getComputedStyle(this.div,null).getPropertyValue("padding-left").replace(/\D/g,"")),$("#geocharter-"+this.id).css("height",this.div.clientHeight-$("h3").css("fontSize").replace(/\D/g,"")),console.log(this.div.innerHTML)},Table.prototype.setData=function(a){var b="<h3>"+this.title+'</h3><div class="table-container"><table class="table table-striped"><thead><tr>';for(var c in a.labels)b+="<th>"+a.labels[c]+"</th>";b+="</tr></thead><tbody>";for(var d in a.data){b+="<tr>";for(var e in a.data[d])console.log(a.data[d][e]),b+="<td>"+a.data[d][e]+"</td>";b+="</tr>"}b+="</tbody></table></div>",document.getElementById("geocharter-"+this.id).innerHTML=b};